import{DomHandler as t}from"primevue/utils";import e from"primevue/basecomponent";import l from"primevue/editor/style";import{openBlock as n,createElementBlock as o,mergeProps as r,createElementVNode as i,renderSlot as u,normalizeProps as s,guardReactiveProps as a}from"vue";var c={name:"BaseEditor",extends:e,props:{modelValue:String,placeholder:String,readonly:Boolean,formats:Array,editorStyle:null,modules:null},style:l,provide:function(){return{$parentInstance:this}},beforeMount:function(){var t;l.loadStyle({nonce:null===(t=this.$primevue)||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.csp)||void 0===t?void 0:t.nonce})}};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function m(t,e){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),l.push.apply(l,n)}return l}function d(t){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?m(Object(l),!0).forEach((function(e){f(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):m(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function f(t,e,l){return(e=b(e))in t?Object.defineProperty(t,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[e]=l,t}function b(t){var e=h(t,"string");return"symbol"===p(e)?e:String(e)}function h(t,e){if("object"!==p(t)||null===t)return t;var l=t[Symbol.toPrimitive];if(void 0!==l){var n=l.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var y=function(){try{return window.Quill}catch(t){return null}}(),v={name:"Editor",extends:c,emits:["update:modelValue","text-change","selection-change","load"],data:function(){return{reRenderColorKey:0}},quill:null,watch:{modelValue:function(t,e){t!==e&&this.quill&&!this.quill.hasFocus()&&(this.reRenderColorKey++,this.renderValue(t))}},mounted:function(){var e=this,l={modules:d({toolbar:this.$refs.toolbarElement},this.modules),readOnly:this.readonly,theme:"snow",formats:this.formats,placeholder:this.placeholder};y?(this.quill=new y(this.$refs.editorElement,l),this.initQuill(),this.handleLoad()):import("quill").then((function(n){n&&t.isExist(e.$refs.editorElement)&&(e.quill=n.default?new n.default(e.$refs.editorElement,l):new n(e.$refs.editorElement,l),e.initQuill())})).then((function(){e.handleLoad()}))},beforeUnmount:function(){this.quill=null},methods:{renderValue:function(t){this.quill&&(t?this.quill.setContents(this.quill.clipboard.convert(t)):this.quill.setText(""))},initQuill:function(){var t=this;this.renderValue(this.modelValue),this.quill.on("text-change",(function(e,l,n){if("user"===n){var o=t.$refs.editorElement.children[0].innerHTML,r=t.quill.getText().trim();"<p><br></p>"===o&&(o=""),t.$emit("update:modelValue",o),t.$emit("text-change",{htmlValue:o,textValue:r,delta:e,source:n,instance:t.quill})}})),this.quill.on("selection-change",(function(e,l,n){var o=t.$refs.editorElement.children[0].innerHTML,r=t.quill.getText().trim();t.$emit("selection-change",{htmlValue:o,textValue:r,range:e,oldRange:l,source:n,instance:t.quill})}))},handleLoad:function(){this.quill&&this.quill.getModule("toolbar")&&this.$emit("load",{instance:this.quill})}}};v.render=function(t,e,l,c,p,m){return n(),o("div",r({class:t.cx("root")},t.ptm("root"),{"data-pc-name":"editor"}),[i("div",r({ref:"toolbarElement",class:t.cx("toolbar")},t.ptm("toolbar")),[u(t.$slots,"toolbar",{},(function(){return[i("span",r({class:"ql-formats"},t.ptm("formats")),[i("select",r({class:"ql-header",defaultValue:"0"},t.ptm("header")),[i("option",r({value:"1"},t.ptm("option")),"Heading",16),i("option",r({value:"2"},t.ptm("option")),"Subheading",16),i("option",r({value:"0"},t.ptm("option")),"Normal",16)],16),i("select",r({class:"ql-font"},t.ptm("font")),[i("option",s(a(t.ptm("option"))),null,16),i("option",r({value:"serif"},t.ptm("option")),null,16),i("option",r({value:"monospace"},t.ptm("option")),null,16)],16)],16),i("span",r({class:"ql-formats"},t.ptm("formats")),[i("button",r({class:"ql-bold",type:"button"},t.ptm("bold")),null,16),i("button",r({class:"ql-italic",type:"button"},t.ptm("italic")),null,16),i("button",r({class:"ql-underline",type:"button"},t.ptm("underline")),null,16)],16),(n(),o("span",r({key:p.reRenderColorKey,class:"ql-formats"},t.ptm("formats")),[i("select",r({class:"ql-color"},t.ptm("color")),null,16),i("select",r({class:"ql-background"},t.ptm("background")),null,16)],16)),i("span",r({class:"ql-formats"},t.ptm("formats")),[i("button",r({class:"ql-list",value:"ordered",type:"button"},t.ptm("list")),null,16),i("button",r({class:"ql-list",value:"bullet",type:"button"},t.ptm("list")),null,16),i("select",r({class:"ql-align"},t.ptm("select")),[i("option",r({defaultValue:""},t.ptm("option")),null,16),i("option",r({value:"center"},t.ptm("option")),null,16),i("option",r({value:"right"},t.ptm("option")),null,16),i("option",r({value:"justify"},t.ptm("option")),null,16)],16)],16),i("span",r({class:"ql-formats"},t.ptm("formats")),[i("button",r({class:"ql-link",type:"button"},t.ptm("link")),null,16),i("button",r({class:"ql-image",type:"button"},t.ptm("image")),null,16),i("button",r({class:"ql-code-block",type:"button"},t.ptm("codeBlock")),null,16)],16),i("span",r({class:"ql-formats"},t.ptm("formats")),[i("button",r({class:"ql-clean",type:"button"},t.ptm("clean")),null,16)],16)]}))],16),i("div",r({ref:"editorElement",class:t.cx("content"),style:t.editorStyle},t.ptm("content")),null,16)],16)};export{v as default};
